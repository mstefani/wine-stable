The Wine maintenance release 2.0.4 is now available.

What's new in this release (see below for details):
  - Various bug fixes
  - Updates to the National Language Support files
  - Documentation updates

The source is available from the following locations:

  https://dl.winehq.org/wine/source/2.0/wine-2.0.4.tar.xz
  http://mirrors.ibiblio.org/wine/source/2.0/wine-2.0.4.tar.xz

Binary packages for various distributions will be available from:

  https://www.winehq.org/download

You will find documentation on https://www.winehq.org/documentation

You can also get the current source directly from the git
repository. Check https://www.winehq.org/git for details.

Wine is available thanks to the work of many people. See the file
AUTHORS in the distribution for the complete list.

----------------------------------------------------------------

Bugs fixed in 2.0.4 (total 31):

   7369  eISLP -help doesn't display, 'text controller' error message
  14530  EM_PASTESPECIAL unimplemented in richedit
  26046  comctl32/monthcal tests show some invalid reads under valgrind
  28741  Odd coordinate in hit test causes uninitialized value references in MONTHCAL_CalculateDayOfWeek()?
  37160  If D3D_DISABLE_9EX is defined, d3d9.h can't be compiled
  37321  foobar2000 'Scheduler' plugin crashes on unimplemented function shell32.dll.ShellExec_RunDLLW
  40025  Winrar installer fails to start
  42256  PhotoFiltre 6 and 7 don't erase the mouse selection when dragging it
  42715  Cxbx (Xbox emulator) doesn`t start (wine: Invalid address)
  43044  League of Legends needs function msvcp140.dll.?__ExceptionPtrAssign@@YAXPAXPBX@Z
  43046  Multiple apps need api-ms-win-crt-stdio-l1-1-0.dll.__stdio_common_vfprintf_s (Civilization VI, Mafia 3, SketchBook)
  43163  Mixcraft 8 crashes when adding a video track ('IAMTimelineGroup', '{9eed4f00-b8a6-11d2-8023-00c0df10d434}' not implemented, 'qedit.dll')
  43290  MyLifeOrganized crashes when mousing over tabs
  43293  strange behavior- Eudora scrambles email addresses
  43324  Beamng.drive requires msvcr120.dll.vsscanf
  43453  Magic Online  (Magic The Gathering: Online) Crashes due to race condition in secur32
  43475  XM6 TypeG crashes on startup.
  43503  FUJITSU Software ATLAS: unimplemented function msvcr80.dll._ismbcl0 called in 32-bit code
  43527  Magic Online  (Magic The Gathering: Online) Crashes due to LOCALE_SNAN returning empty string
  43536  WIC can't encode to GUID_WICPixelFormat32bppPBGRA PNG
  43603  clipboard PIXMAP regression after upgrading from 1.8.x to 2.x
  43658  Text in Deletion Confirmation MsgBox has wrong background colour
  43668  Terris Universal Remote UFB 234 - update database does not work
  43707  [GdiPlus] HatchStyle is incorrectly named in Wine. Should be GpHatchStyle
  43714  ImageMagick crashes with msvcr120.dll._vfprintf_l
  43770  Fidibo installer crashes very early in win7 mode
  43774  Chromium-based browser engine (CEFv3) used by several games randomly crashes on shutdown (World of Warships 0.6.x)
  43779  In ole32/storage32.c , miss check for the result of HeapAlloc
  43877  "Cannot allocate DOS memory" error with 16-bit Windows applications
  43912  wine-2.0.3/programs/wineboot/wineboot.c:684]: (style) Suspicious condition
  44085  winecfg: Use more secure HTTPS URL in about

----------------------------------------------------------------

Changes since 2.0.3:

Akihiro Sagawa (5):
      msvcrt/tests: Add tests for mbstowcs and wcstombs with empty strings.
      msvcrt: Fix mbstowcs with empty strings.
      readme: Update Japanese translation.
      explorer: Use neutral language for the version resource.
      regsvr32: Use neutral language for the version resource.

Alex Henrie (5):
      msvcrt: Note that __stdio_common functions are for ucrtbase.
      ucrtbase: Add __stdio_common_vfprintf_s.
      shell32: Implement ShellExec_RunDLL.
      include: Add D3D_DISABLE_9EX checks to d3d9.h.
      user32: Implement IDI_SHIELD.

Alexandre Julliard (10):
      winex11: If importing an X11 clipboard format fails, try other candidate formats for the target.
      ntdll: Support loading binaries that start inside the DOS area.
      ntdll: Ignore the preload start address if it is zero.
      README: Remove references to removed Wiki pages.
      readme: Patches should now be sent to wine-devel.
      configure: Replace AC_HEADER_MAJOR macro to handle glibc 2.25 sys/types.h breakage.
      wineconsole: Avoid some fatal errors.
      wineconsole: Remove duplicate line feeds.
      wordpad: New high resolution cursor generated from SVG.
      explorer: Don't forward the system tray to the display driver in desktop mode.

Alistair Leslie-Hughes (3):
      ole32: Add pointer check.
      qedit/tests: Add test for the IAMTimelineGroup interface.
      qedit: Support IAMTimelineGroup interface in IAMTimelineObj.

Andrew Eikum (2):
      kernel32: Use different default sublangs for Spanish and Chinese.
      explorer: Don't leak PIDL.

Andrey Semakin (4):
      winemine: Mine random placing fix.
      winemine: Added Shift+LClick hotkey to uncover multiple cells.
      winemine: Add WM_RBUTTONUP to cases of TestMines().
      winemine: Save board without need to correctly finish the app.

André Hentschel (1):
      ntdll: Bump Win 10 version to 15063.

Anton Romanov (3):
      windowscodecs: PNGEncoder: Return 32bppRGBA pixel format by default.
      secur32: Fix race between schan_(Encrypt|Decrypt)Message.
      secur32: Protect SSLRead/Write with cs on OSX.

Austin English (30):
      readme: Document that wine can be run from the build directory.
      readme: Clarify the wording a bit.
      announce: Move WineHQ URLs to https.
      readme: Move WineHQ URLs to https.
      configure: Move WineHQ URLs to https.
      loader: Move WineHQ URLs to https.
      server: Move WineHQ URLs to https.
      widl: Move WineHQ URLs to https.
      winegcc: Move WineHQ URLs to https.
      wrc: Move WineHQ URLs to https.
      winemaker: Move WineHQ URLs to https.
      wmc: Move WineHQ URLs to https.
      winebuild: Move WineHQ URLs to https.
      winedump: Move WineHQ URLs to https.
      c2man.pl: Move WineHQ URLs to https.
      msiexec: Move WineHQ URLs to https.
      notepad: Move WineHQ URLs to https.
      regedit: Move WineHQ URLs to https.
      winemine: Move WineHQ URLs to https.
      winepath: Move WineHQ URLs to https.
      wineconsole: Move WineHQ URLs to https.
      regsvr32: Move WineHQ URLs to https.
      wineboot: Move WineHQ URLs to https.
      winecfg: Move WineHQ URLs to https.
      winefile: Move WineHQ URLs to https.
      winedbg: Move WineHQ URLs to https.
      iexplore: Move WineHQ URLs to https.
      appwiz.cpl: Move WineHQ URLs to https.
      maintainers: Move WineHQ URLs to https.
      loader/wine.pl.UTF-8.man.in: Move WineHQ URL to https.

Bas Weelinck (1):
      start: Ignore multiple quoted arguments as title.

Daniel Lehman (2):
      msvcrt: Add __ExceptionPtrAssign.
      server: Fix copy & paste for number of subkeys.

Dmitry Timoshkov (3):
      user32/tests: Test DialogBoxParam using a dialog template with invalid control class.
      user32: DialogBoxParam should return -1 when dialog control creation fails.
      cmd: '$E' in the prompt should be interpreted as an escape code (0x1b).

Fabian Maurer (5):
      shell32: Draw text on message boxes without background.
      gdiplus: Avoid division by zero in SOFTWARE_GdipDrawThinPath.
      wineboot: In ProcessRunKeys use correct parentheses in condition.
      ole32: Don't redefine htole32/htole16.
      winecfg: Remove processorArchitecture from manifest.

Gijs Vermeulen (1):
      msvcrt: Add _vfprintf_l.

Henri Verbeet (1):
      wordpad: Fall back to the default position if the saved position is off-screen.

Hugh Bellamy (1):
      gdiplus: Define GpHatchStyle.

Huw D. M. Davies (6):
      gdi32: Add a helper to fill rectangles with a given pixel.
      gdi32: Respect the rop mode in SetPixel.
      ole32: In the non-aggregated case a request for IUnknown actually returns IOleCache2.
      riched20: Add support for EM_PASTESPECIAL.
      winefile: Initialize length before calling GetWindowPlacement().
      winedbg: Return after raising an exception.

Jacek Caban (1):
      services: Call RpcMgmtWaitServerListen in RPC_Stop.

Lauri Kenttä (5):
      readme: Fix word order.
      readme: Update Finnish translation.
      readme: Update Finnish translation.
      readme: Use UTF-8 consistently in all translations.
      readme: Move WineHQ URLs to https in translations.

Li Keqing (1):
      wined3d: Add Intel HD Graphics 5000 to the GPU list.

Nikolay Sivov (15):
      msvcrt: Added _ismbcl0().
      kernel32/nls: Added genitive month names for Polish.
      kernel32/nls: Added genitive month names for Belarusian.
      kernel32/nls: Added genitive month names for Armenian.
      kernel32/nls: Added genitive month names for Croatian.
      kernel32/nls: Added genitive month names for Czech.
      kernel32/nls: Added Nepali locale data.
      kernel32/nls: Added Bangla (India) locale data.
      kernel32/nls: Added LOCALE_SNAN entries.
      comctl32/monthcal: Make sure set today date is valid before using it (Valgrind).
      comctl32/monthcal: Initialize day field before setting final hit test result (Valgrind).
      msxml3/httpreq: Support HEAD request.
      msvcr120: Added vsscanf() and vswscanf().
      readme: Update Russian translation.
      msi: Avoid uninitialized pointer access on error path (Coverity).

Piotr Caban (5):
      msvcrt: Fix strcpy implementation so it works on overlapping buffers.
      msvcr120: Add wctype implementation.
      wine.inf: Add Windows Messaging Subsystem MAPI registry key.
      vbscript: Don't leak IEnumVARIANT in interp_enumnext.
      msvcr120: Fix exception object refcounting in __ExceptionPtrAssign.

Stefan Dösinger (2):
      ntdll: Do not queue a completion status if pipe ops fail synchronously.
      d3dx9/tests: Use float bit patterns in test_D3DXFloat_Array.

Vincent Povirk (2):
      loader/wine.inf: Put 32-bit .ds fakedlls in windows/twain_32.
      wine.inf: Put 64-bit .ds fakedlls in windows/twain_64.

Zebediah Figura (1):
      d3dcompiler: Fix a buffer size computation.

--
Michael Stefaniuc
mstefani@winehq.org
