The Wine maintenance release 5.0.2 is now available.

What's new in this release (see below for details):
  - Various bug fixes

The source is available from the following locations:

  https://dl.winehq.org/wine/source/5.0/wine-5.0.2.tar.xz
  http://mirrors.ibiblio.org/wine/source/5.0/wine-5.0.2.tar.xz

Binary packages for various distributions will be available from:

  https://www.winehq.org/download

You will find documentation on https://www.winehq.org/documentation

You can also get the current source directly from the git
repository. Check https://www.winehq.org/git for details.

Wine is available thanks to the work of many people. See the file
AUTHORS in the distribution for the complete list.

----------------------------------------------------------------

Bugs fixed in 5.0.2 (total 46):

   8439  Multiple Microsoft product installers fail due missing shell app path expansion (Visual Studio .NET 2002, 2003, Visual Foxpro 9.0)
  19239  Multiple applications crash with division by zero on edit control with zero line height (eBay Turbo Lister, Clarin TX control wrapper)
  29806  Hype The Time Quest: DirectX Media (DXM) v6.0 runtime installer fails (advpack.ExecuteCab should extract the INF from CAB before running the install part)
  30814  Age of Empires II scrolling gets stuck after Alt-Tab away and back
  31890  Multiple applications need IAudioEndpointVolume::GetMasterVolumeLevelScalar method implementation (Cisco IP Communicator, Cairo Shell v0.3.x)
  39534  Bad Mojo Redux crashes on start (ddraw1_vtbl and ddraw_surface1_vtbl need to be writable)
  41559  (winecfg) Add ability to change windows version via command line
  43638  Multiple 4k demoscene OpenGL demos crash on startup with 'No active WGL context found' (Yermom, 'End of time' by Alcatraz and Altair)
  45839  Qt 5.8 SDK installer needs 'IFileSystem.MoveFile' method implementation for maintenance tool creation step
  46949  DDraw games using older windowed mode wrappers such as DirectX Windower Embedded v2.3/D3D Windower v1.x crash (ddraw_palette_vtbl and ddraw_surface{1,2,3,4,7}_vtbl need to be writable)
  47621  Command link buttons in task dialog are displayed in wrong style
  47794  Rockstar Games Launcher installer button images do not display
  47999  Gif pictures stored in PE files are not loaded into HTML web pages via Res protocol
  48186  every wine process shows a definite leak in dlls/ntdll/env.c
  48471  Mismatching behavior of GetEnvironmentVariableW for empty / long values
  48490  Restored minimized windows have wrong height
  48495  XCP-ng Center v8.x (.NET 4.6 app) can't connect to server with self-signed certificate
  48593  Multiple games play only one frame of video (Fable: The Lost Chapters, Audiosurf, Dark Souls 2, Oddworld: Munch's Oddysee)
  48611  Cairo Shell v0.3.x (.NET 4.7 app) crashes due to missing 'HKCU\\Software\\Microsoft\\Windows NT\\CurrentVersion\\WinLogon\\Shell' registry sub-key
  48683  iTunes v12.10.4.2 crashes on unimplemented function wmvcore.dll.WMIsContentProtected when adding folders to directory scan
  48731  Just Cause crashes while loading level with builtin d3dx9_26
  48732  How to Survive crashes on start (fullscreen mode)
  48738  cmd.exe crashes when running certain batch files
  48739  ConEmu (Windows console emulator) v19.10.12 fails to set Wininet's INTERNET_OPTION_IGNORE_OFFLINE and shows error dialog at startup
  48740  ConEmu is constantly loosing focus
  48747  ConEmu flickers and scrolls randomly
  48750  Few missing DirectSound3D Algorithms GUID Defs
  48762  IExplore immediately crashes on www.msnbc.com with a failed assertion
  48801  Multiple games crash on unimplemented function d3dx11_43.dll.D3DX11GetImageInfoFromFile (Assetto Corsa 1.14.x, Project Cars)
  48803  FITietokanta crashes every time after ADD-button is pressed
  48806  Panzer Corps 2 needs msvcp140.dll.?_XLgamma@std@@YANN@Z
  48814  Microsoft Word 6.0 for Windows installer crashes after wine-4.8-247-g0d7d0427d0
  48816  The explorer doesn't support '/cd' option
  48844  Magical Scramble Demo 1.20P shows white boxes instead of pictures.
  48932  Wine does not display any windows unless `xrandr --auto` has been run
  48960  NtQueryDirectoryFile incorrectly returns STATUS_NO_MORE_FILES when it encounters an ignored entry
  48974  Multiple MSI-based installers show 'newBinaryXX' text instead of bitmap on button controls (missing support for 'msidbControlAttributesBitmap')
  49005  Listview header occasionally fails to redraw when list is scrolled vertically
  49034  Enlarge list width in font selection dialog
  49115  Hitman (2016) and Hitman 2 (2018) fail to launch in DX11 mode
  49142  Horizontal mouse scroll events (X11 buttons 6 and 7) should not be translated to back/forward events
  49146  Hearts of Iron IV needs api-ms-win-crt-private-l1-1-0.dll._o_sin
  49173  widl generates invalid code for Gecko's ISimpleDOM.idl
  49175  Duplicated checking canonicalized inside kernelbase/path.c
  49198  Denuvo Anti-Cheat 'denuvo-anti-cheat.sys' crashes in entry point (incorrect page protection restored during relocation processing)
  49203  Possible incorrect usage >= instead <= in shlview.c

----------------------------------------------------------------

Changes since 5.0.1:

Akihiro Sagawa (2):
      ddraw/tests: Add more managed texture tests.
      ddraw: Allow to create managed textures with DDSCAPS_TEXTURE|DDSCAPS_3DDEVICE caps.

Alex Henrie (2):
      mmdevapi: Report 100% volume in GetMasterVolumeLevelScalar stub.
      wine.inf: Add Winlogon keys.

Alexandre Julliard (5):
      user.exe: Clear out the thunk array to catch invalid winprocs.
      ntdll: Don't abort directory search in single entry mode when a file is ignored.
      urlmon/tests: Update winehq.org's IP address.
      secur32/tests: Update for new WineHQ certificate.
      wininet/tests: Update for new WineHQ certificate.

Alistair Leslie-Hughes (3):
      d3dx9: Add support for D3DFMT_P8 in DDS files.
      ddraw: Make palette and remaining surface vtbls writable.
      shell32: Correct if condition.

Andrew Eikum (1):
      winebus.sys: Don't return too early if SDL initialization succeeds.

Andrey Gusev (1):
      d3dx11: Add D3DX11GetImageInfoFromFileA/W stub.

Bernhard Übelacker (1):
      cmd: Fix crash in if condition parsing.

Brendan Shanks (3):
      dinput: Fix crash in dump_DIEFFECT() when rglDirection is unexpectedly NULL.
      dinput: Fix crash in dump_DIEFFECT() when lpvTypeSpecificParams is unexpectedly NULL.
      vulkan-1: Set FILEVERSION to fix official Vulkan loader installer.

Damjan Jovanovic (5):
      shell32/tests: Test shlexec argv[0], and same-named executables in a different directory.
      shell32: Simplify SHELL_execute().
      shell32: Pass the executable's full path from SHELL_execute() to CreateProcess().
      mshtml: Fix handling res protocol resource type ids without leading '#'.
      mshtml: Support implicit RT_FILE resource type in res protocol.

Dmitry Timoshkov (4):
      server: All fields up to CheckSum are mandatory regardless of SizeOfOptionalHeader value.
      ntdll: Don't try to map the PE file past the size of the backing file.
      kernel32: On process entry store PEB address in %ebx.
      kernel32/tests: Add a PE test image that resembles format of some of 8k demos.

Emilio Cobos Álvarez (1):
      widl: Use DECLSPEC_ALIGN in MSVC compatible way for return types too.

Gabriel Ivăncescu (3):
      quartz: Clear the WS_CHILD style instead of unparenting the window.
      winex11.drv: Use a helper to retrieve the decoration rect for managed windows.
      winex11.drv: Fix X11DRV_X_to_window_rect to handle windows smaller than the decoration.

Gijs Vermeulen (2):
      advpack: Extract inf file before installing in ExecuteCab().
      ucrtbase: Add more _o forwards.

Hans Leidekker (1):
      msi: Add support for bitmap buttons.

Ilia Mirkin (1):
      crypt32: Also check CERT_CHAIN_POLICY_ALLOW_UNKNOWN_CA_FLAG.

Jacek Caban (2):
      scrrun: Add MoveFile implementation.
      widl: Use DECLSPEC_ALIGN in MSVC compatible way.

Jeff Smith (3):
      mshtml/tests: Add tests showing how toString has changed in IE9+.
      jscript: Set return object's class to 'object' in Object.create.
      msvcrt: Stop forwarding iswctype functions to ntdll.

Markus Engel (1):
      user32: Force undefined bits in GetKeyState() and GetKeyboardState() to zero.

Martin Storsjo (2):
      ntdll: Properly return errors when failing to unwind.
      ntdll: Pass a nonnull handler_data when continuing after a collided unwind on arm64.

Mas Ahmad Muhammad (1):
      comdlg32: Enlarge list area in CHOOSE_FONT window.

Michael Müller (2):
      opengl32: Treat invalid pixel types as PFD_TYPE_RGBA in wglChoosePixelFormat.
      ddraw: Make ddraw1_vtbl and ddraw_surface1_vtbl writable.

Murray Colpman (1):
      winex11.drv: Interpret mouse 6/7 as horiz scroll.

Nikolay Sivov (3):
      comctl32/button: Use duplicated image for drawing.
      comctl32/listview: Only apply horizontal offset when setting header position.
      dxgi: Translate DXGI_USAGE_UNORDERED_ACCESS to corresponding wined3d bind flag.

Owen Rudge (2):
      winecfg: Add support for '/v' parameter allowing Windows version to be changed.
      winecfg: Return 0 on success when setting Windows version.

Paul Gofman (1):
      d3d11: Use stricmp() instead of _strnicmp(..., -1).

Piotr Caban (1):
      msvcp90: Add std:_XLgamma implementation.

Roman Pišl (5):
      wininet: Add stub for INTERNET_OPTION_IGNORE_OFFLINE.
      user32/edit: Avoid division by zero during initialization.
      wineconsole: Don't activate window when computing positions.
      wineconsole: Don't allow recurrent resizing while grabbing changes.
      comctl32/edit: Avoid division by zero during initialization.

Rémi Bernon (1):
      winex11.drv: Remove frame when non-client area is empty.

Sven Baars (6):
      ntdll: Fix a string leak in init_user_process_params (Valgrind).
      setupapi: Fix a memory leak (Valgrind).
      kernelbase: Fix a string leak in CreateProcessInternal (Valgrind).
      ntdll: Fix a memory leak in fork_and_exec.
      setupapi: Only copy driver info if SetupDiEnumDriverInfoW succeeded (Valgrind).
      setupapi: Make sure the class name is always set on success in SetupDiGetINFClassW (Valgrind).

Vijay Kiran Kamuju (2):
      wmvcore: Add semi-stub implementation for WMIsContentProtected.
      include: Add missing GUIDs in dsound.h.

Vladimir Panteleev (4):
      kernel32/tests: Fix GetLastError() checks in environment tests.
      kernelbase: Preserve last error when GetEnvironmentVariableA succeeds.
      kernelbase: Don't return ERROR_INSUFFICIENT_BUFFER from GetEnvironmentVariableW.
      kernelbase: Fix GetEnvironmentVariableW return for empty variables.

Zebediah Figura (5):
      winegstreamer: Also use GST_QOS_TYPE_OVERFLOW for samples that arrive on time.
      winegstreamer: Clamp both timestamp and timestamp + diff to 0.
      ntoskrnl.exe: Protect relocated pages one at a time.
      ntoskrnl.exe: Protect the two relocated pages independently.
      ntdll: Avoid leaking the previous environment in RtlSetCurrentEnvironment().

Zhipeng Zhao (1):
      explorer: Support '/cd,' command line option.

Zhiyi Zhang (5):
      winex11.drv: Ignore disconnected outputs when finding mirroring slaves.
      comctl32/tests: Test button styles.
      comctl32/button: Do not set BS_PUSHBUTTON and BS_DEFPUSHBUTTON style directly to Split Buttons and Command Links.
      kernelbase: Check NULL canonicalized_len parameter in UrlCanonicalizeW().
      setupapi: Fix a registry key handle leak.

--
Michael Stefaniuc
mstefani@winehq.org
